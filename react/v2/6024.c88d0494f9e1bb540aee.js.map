{"version":3,"file":"6024.c88d0494f9e1bb540aee.js","mappings":"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","sources":["webpack://homepage_react/./src/plugins/axios.js","webpack://homepage_react/./src/apis/npmRegistry.js","webpack://homepage_react/./src/modules/loadingDiv/LoadingDiv.jsx","webpack://homepage_react/./utils/reviseISOString.js","webpack://homepage_react/./src/apis/npmAPI.js","webpack://homepage_react/./src/components/overview/chartOptions.js","webpack://homepage_react/./src/components/overview/PackageWidget.jsx","webpack://homepage_react/./src/components/overview/pageInfo.js","webpack://homepage_react/./src/components/overview/Overview.jsx","webpack://homepage_react/./src/routes/OverviewContainer.jsx"],"sourcesContent":["import axios from 'axios';\n\nconst instance_registry = axios.create({\n  baseURL: `${process.env.REGISTRY_URL}`,\n});\n\nconst instance_api = axios.create({\n  baseURL: `${process.env.API_URL}`,\n});\n\nexport { instance_registry as npmRegistry, instance_api as npmAPI };\n","import { npmRegistry as service } from '@src/plugins/axios.js';\n\nexport default {\n  getPackageInfo: function (Id) {\n    return service.get(`/${Id}`);\n  },\n  getPackages: function (lang) {\n    let paramText = '@blacktoolbox';\n    switch (lang) {\n      case 'js':\n        paramText += '/prototype-';\n        break;\n      case 'react':\n        paramText += '/react-';\n        break;\n      case 'vue':\n        paramText += '/vue-';\n        break;\n    }\n    return service.get('/-/v1/search', {\n      params: {\n        text: paramText,\n      },\n    });\n  },\n};\n","import React from 'react';\nimport classnames from 'classnames';\nimport { FontAwesomeIcon as FAI } from '@fortawesome/react-fontawesome';\n\nconst LoadingDiv = (props) => {\n  const { className, ...loadingDevProps } = props;\n  return (\n    <div className={classnames('module-loading', className)} {...loadingDevProps}>\n      <FAI className=\"loading_spinner\" icon={['fas', 'spinner']} fixedWidth spin pulse />\n    </div>\n  );\n};\n\nexport default LoadingDiv;\n","const formatISOString = /((\\d{4})-(\\d{2})-(\\d{2}))T((\\d{2}):(\\d{2}):(\\d{2})).\\d{3}Z/;\n// 0: total\n\n// 1: Date(YYYY-MM-DD)\n// 2: Full Year\n// 3: Mounth\n// 4: Day\n\n// 5: Time(HH-MM-SS)\n// 6: Hour\n// 7: Minute\n// 8: Second\n\nconst reviseISOString = function (isoString) {\n  let localISOString = new Date(Date.parse(isoString) - new Date().getTimezoneOffset() * 60 * 1000).toISOString();\n  let separateDateTime = formatISOString.exec(localISOString);\n  let obj = {};\n  if (separateDateTime) {\n    obj = {\n      whole: separateDateTime[0],\n      date: separateDateTime[1],\n      year: separateDateTime[2],\n      month: separateDateTime[3],\n      day: separateDateTime[4],\n      time: separateDateTime[5],\n      hour: separateDateTime[6],\n      minute: separateDateTime[7],\n      second: separateDateTime[8],\n    };\n  }\n  return obj;\n};\n\nexport default reviseISOString;\n","import { npmAPI as service } from '@src/plugins/axios.js';\n\nexport default {\n  getPackageDownloads: function (pkgName) {\n    return service.get(`/downloads/range/last-year/${pkgName}`);\n  },\n};\n","const createChartOptions = (type) => {\n  let color = '';\n  switch (type) {\n    case 'js':\n      color = '#f0db4f';\n      break;\n    case 'react':\n      color = '#61dafb';\n      break;\n    case 'vue':\n      color = '#41b883';\n      break;\n    case 'angular':\n      color = '#b52e31';\n      break;\n    default:\n      color = '#000000';\n      break;\n  }\n  return {\n    colors: [color],\n    chart: {\n      animations: {\n        enabled: false,\n      },\n      toolbar: {\n        show: false,\n      },\n      zoom: {\n        enabled: false,\n      },\n      sparkline: {\n        enabled: true,\n      },\n    },\n    dataLabels: {\n      enabled: false,\n    },\n    tooltip: {\n      x: {\n        show: false,\n      },\n    },\n    grid: {\n      show: false,\n    },\n    xaxis: {\n      labels: {\n        show: false,\n      },\n      tooltip: {\n        enabled: false,\n      },\n    },\n    yaxis: {\n      forceNiceScale: true,\n      labels: {\n        show: false,\n      },\n      max: function (max) {\n        return max + 10;\n      },\n      min: -10,\n    },\n  };\n};\n\nexport default createChartOptions;\n","import React, { useState, useEffect } from 'react';\nimport classnames from 'classnames';\nimport Chart from 'react-apexcharts';\nimport { FontAwesomeIcon as FAI } from '@fortawesome/react-fontawesome';\n\nimport reviseISOString from '@src/../utils/reviseISOString.js';\nimport { lang } from '@src/plugins/btblab-prototype-languages.js';\nimport API_npmAPI from '@src/apis/npmAPI.js';\n\nimport { LoadingDiv } from '@src/modules/loadingDiv';\n\nimport createChartOptions from './chartOptions.js';\n\nconst WEEK = 7;\n\nconst PackageWidget = (props) => {\n  const state_Series = useSeriesState();\n\n  const series = [\n    {\n      name: lang.translate('chart.times'),\n      data: state_Series.series,\n    },\n  ];\n\n  useEffect(() => {\n    _getDownloads(props.data.name);\n  }, []);\n\n  function _getDownloads(pkgName) {\n    API_npmAPI.getPackageDownloads(pkgName).then(({ data }) => {\n      state_Series.update(data.downloads);\n    });\n  }\n\n  return (\n    <div className={classnames('btb-overview-package-widget', props.className)}>\n      <p className=\"widget_title\">\n        {props.data.name}\n        <a\n          className=\"inline-link\"\n          href={`https://www.npmjs.com/package/${props.data.name}`}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <FAI icon={['fas', 'external-link-alt']} fixedWidth size=\"xs\"/>\n        </a>\n      </p>\n      <p className=\"widget_description\">{props.data.description}</p>\n      <p>\n        <span className=\"widget_entry\">{lang.translate('overview.version_colon')}</span>\n        <span className=\"widget_value\">{props.data.version}</span>\n      </p>\n      <p>\n        <span className=\"widget_entry\">{lang.translate('overview.release_colon')}</span>\n        <span className=\"widget_value\">{reviseISOString(props.data.date).date}</span>\n      </p>\n      {series[0].data.length ? (\n        <>\n          <p>\n            <span className=\"widget_entry\">{lang.translate('overview.download_colon')}</span>\n            <span className=\"widget_value\">{state_Series.series[state_Series.series.length - 1]}</span>\n          </p>\n          <div className=\"widget_chart\">\n            <p className=\"widget_row\">\n              <span className=\"widget_entry\">{lang.translate('overview.downloads_colon')}</span>\n            </p>\n            <Chart options={createChartOptions(props.type)} series={series} type=\"area\" height=\"100%\" />\n          </div>\n        </>\n      ) : (\n        <div className=\"widget_chart chart-loading\">\n          <LoadingDiv />\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction useSeriesState() {\n  const [series, setState] = useState([]);\n\n  function _extractToWeekly(data) {\n    data.reverse();\n    let weekData = Array(Math.ceil(data.length / WEEK))\n      .fill(0)\n      .map((entry, index) => {\n        let count = 0;\n        for (let i = index * WEEK; i < Math.min((index + 1) * WEEK, data.length); i++) {\n          count += data[i].downloads;\n        }\n        return count;\n      });\n    return weekData.reverse();\n  }\n  return {\n    series,\n    update: (data) => {\n      setState(_extractToWeekly(data || []));\n    },\n  };\n}\n\nexport default PackageWidget;\n","const pageInfo = {\n  description: 'overview.description',\n  linkList: [\n    {\n      id: 'github',\n      fa: ['fab', 'github'],\n      url: 'https://github.com/BlackToolBoxLaboratory?q=react',\n    },\n    {\n      id: 'npm',\n      fa: ['fab', 'npm'],\n      url: 'https://www.npmjs.com/search?q=%40blacktoolbox%2Freact',\n    },\n  ],\n};\n\nexport default pageInfo;\n","import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { lang } from '@src/plugins/btblab-prototype-languages.js';\nimport { openLink } from '@src/utils/functions.js';\nimport API_npmRegistry from '@src/apis/npmRegistry.js';\nimport { Page, PageHead, Section } from '@src/modules/pageLayout';\nimport { LoadingDiv } from '@src/modules/loadingDiv';\n\nimport PackageWidget from './PackageWidget.jsx';\nimport pageInfo from './pageInfo.js';\n\nconst Overview = () => {\n  useSelector((state) => {\n    return {\n      languageSetting: state.language.languageSetting,\n    };\n  });\n  const state_Packages = {\n    js: usePackagesState(),\n    react: usePackagesState(),\n    vue: usePackagesState(),\n  };\n\n  useEffect(() => {\n    _getPackages('js');\n    _getPackages('react');\n    _getPackages('vue');\n  }, []);\n\n  function _getPackages(type) {\n    API_npmRegistry.getPackages(type).then(({ data }) => {\n      state_Packages[type].update(data.objects);\n    });\n  }\n  function _renderPackages(type) {\n    if (state_Packages[type].packages.length) {\n      return (\n        <div className=\"grid-row\">\n          {state_Packages[type].packages.map((entry) => {\n            return (\n              <div className=\"grid-col-lg-6\" key={entry.package.name}>\n                <PackageWidget data={entry.package} type={type} />\n              </div>\n            );\n          })}\n        </div>\n      );\n    } else {\n      return <LoadingDiv />;\n    }\n  }\n\n  return (\n    <Page id=\"btb-overview\">\n      <PageHead title={lang.translate('overview.title')} clickBtn={openLink} linkList={pageInfo.linkList} />\n      <Section head={'JAVASCRIPT'}>{_renderPackages('js')}</Section>\n      <Section head={'REACT'}>{_renderPackages('react')}</Section>\n      <Section head={'VUE'}>{_renderPackages('vue')}</Section>\n    </Page>\n  );\n};\n\nfunction usePackagesState() {\n  const [packages, setState] = useState([]);\n  return {\n    packages,\n    update: (data) => {\n      setState(data || []);\n    },\n  };\n}\n\nexport default Overview;\n","import React from 'react';\n\nimport Overview from '@src/components/overview/Overview.jsx';\n\nconst OverviewContainer = () => {\n  return <Overview />;\n};\n\nexport default OverviewContainer;\n"],"names":["instance_registry","axios","baseURL","concat","process","instance_api","getPackageInfo","Id","service","getPackages","lang","paramText","params","text","props","className","loadingDevProps","_objectWithoutProperties","_excluded","React","_extends","classnames","FAI","icon","fixedWidth","spin","pulse","formatISOString","isoString","localISOString","Date","parse","getTimezoneOffset","toISOString","separateDateTime","exec","obj","whole","date","year","month","day","time","hour","minute","second","getPackageDownloads","pkgName","type","color","colors","chart","animations","enabled","toolbar","show","zoom","sparkline","dataLabels","tooltip","x","grid","xaxis","labels","yaxis","forceNiceScale","max","min","WEEK","state_Series","_useState2","_slicedToArray","useState","series","setState","_extractToWeekly","data","reverse","Array","Math","ceil","length","fill","map","entry","index","count","i","downloads","update","useSeriesState","name","useEffect","API_npmAPI","then","_ref","href","target","rel","size","description","version","reviseISOString","Chart","options","createChartOptions","height","LoadingDiv","linkList","id","fa","url","usePackagesState","packages","useSelector","state","languageSetting","language","state_Packages","js","react","vue","_getPackages","API_npmRegistry","objects","_renderPackages","key","package","PackageWidget","Page","PageHead","title","clickBtn","openLink","pageInfo","Section","head","Overview"],"sourceRoot":""}